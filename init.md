# Role Definition
角色设定与任务目标：
你是一位拥有10年以上经验的高级游戏服务端架构师及全栈技术专家。当前日期为 **2026-02-12**。我正在启动一个名为 **“赛博江湖：AI原生互动直播游戏” (Cyber-Jianghu)** 的全新项目。
赛博江湖的定义是为传统的武侠人物和江湖世界赋予硅基生命。
请根据以下“项目背景信息”和“需求细节”，配合 Claude Code 的执行能力，为我撰写一份详细的技术方案计划书。

# Key Instruction
关键指令（Key Instruction）：
在撰写方案前，请务必针对关键技术选型列出决策点，提供 2-3 种主流方案的对比（含优缺点），特别是针对 **“实时视觉生成流水线”** 和 **“直播间前端表现层”** 的选择，并询问我的最终决定。待我确认后，再生成完整的技术方案文档。

# Project Background
项目背景信息（已整理）：
* **项目状态：** 全新项目，目录为空。
* **开发模式：** **Vibe Coding (0代码模式)**。由 GLM-5 担任产品与逻辑大脑，Claude Code 负责代码落地，Go 语言为主要开发语言。
* **核心硬件：** 本地拥有一张 **RTX 4070 Ti Super (16G)**，可用于本地推理。
* **核心玩法：**
    * **输入：** 观众在直播间发送弹幕（指令/投票）。
    * **处理：** 后端（Go）聚合指令 -> 投喂给 LLM（GLM-5） -> 生成剧情分支 + 视觉描述提示词（Prompt）。
    * **输出：** 实时生成当前剧情的**插图/场景图** + 剧情文本 + 语音旁白，推流至直播平台，插图需要尽量保持人物一致性。
* **已确定的技术栈偏好：**
    * **后端语言：** Go (Golang) 1.23+
    * **逻辑大脑：** ZhipuAI (GLM-5) API
    * **数据存储：** Mysql (GORM)/MongoDB/Redis
    * **直播协议：** WebSocket (对接 B站/抖音)

# Pending Details
待确认的功能细节（重点）：
1.  **视觉表现（Frontend/Overlay）：**
    * 我不想要纯文字 MUD。我希望根据剧情实时生成图片（如：主角进入少林寺，屏幕即时显示威严壮阔的寺庙）。
    * 需要确认是使用 OBS 浏览器源（Browser Source）加载 HTML，还是直接生成视频流。
2.  **图像生成源（Image Gen）：**
    * 利用本地 4070 Ti 部署 ComfyUI/SDXL？还是调用云端 API（CogView-3/Midjourney）？需要平衡速度（秒级响应）、质量与token费用。
3.  **交互反馈：**
    * 除了图片，是否需要简单的 UI 动效（如血条扣减动画、打赏特效）？

# Expected Output Format
期望的输出格式：

请分两步进行回复：

**第一步：技术选型决策表**
请针对以下方面征求我的意见（请务必结合“0代码开发”和“直播实时性”进行分析）：

1.  **AIGC 视觉工作流：**
    * *方案 A：* **本地 ComfyUI + SDXL Turbo/Flux**（利用 4070 Ti，0成本，毫秒级出图，但需维护本地环境）。
    * *方案 B：* **云端 API (CogView-3 / Stability AI)**（开发极其简单，画质稳定，但有延迟且烧钱）。
    * *方案 C：* **混合模式**（背景图本地生成，关键角色/道具用云端）。

2.  **前端/OBS 表现层架构：**
    * *方案 A：* **HTMX + Go Templates**（极简架构，Go 直接渲染 HTML 片段推给 OBS，无复杂前端代码，适合 Vibe Coding）。
    * *方案 B：* **Vue3/React 单页应用**（作为 OBS 浏览器源，视觉效果上限高，但增加了前端开发复杂度）。
    * *方案 C：* **纯本地文件流**（Go 生成图片保存为 `current.png`，OBS 监听文件变动。最简单，但无过渡动画，体验较生硬）。

3.  **TTS 语音方案（旁白/NPC）：**
    * *方案 A：* **GPT-SoVITS (本地)**（效果最好，可训练特定音色，占用显存）。
    * *方案 B：* **Edge-TTS**（免费，速度快，但机械感稍强）。

**第二步：完整方案结构**
（待我确认上述选项后，再输出包含现状分析、模块解耦设计（Go Interface定义）、Prompt工程策略、容错机制及 Vibe Coding 执行路线图的完整文档。）